name: GHA

run-name: ${{ github.head_ref || github.ref_name }}-gha

on: # yamllint disable-line rule:truthy
  pull_request:
    paths-ignore:
      - '**.yml'
      - '**.md'
      - '**.txt'
      - 'addons/gaea-screenshotter/**'
      - '**.png'
      - '**.svg'
  workflow_dispatch:

concurrency:
  group: gha-${{ github.event.number }}
  cancel-in-progress: true


jobs:
  gdlint:
    if: ${{ !cancelled() }}
    name: 'ğŸ“ GDLint'
    uses: ./.github/workflows/gdlint.yml

  generation_testing:
    name: 'ğŸ Generation'
    uses: ./.github/workflows/generation_testing.yml
    
    permissions:
      actions: write
      checks: write
      contents: write
      pull-requests: write
      statuses: write
    
  nodes_testing:
    name: 'ğŸ Node'
    uses: ./.github/workflows/nodes_testing.yml
    
    permissions:
      actions: write
      checks: write
      contents: write
      pull-requests: write
      statuses: write
    
  renderers_testing:
    name: 'ğŸ Renderers'
    uses: ./.github/workflows/renderers_testing.yml
    
    permissions:
      actions: write
      checks: write
      contents: write
      pull-requests: write
      statuses: write
  
  other_testing:
    name: 'ğŸ Other'
    uses: ./.github/workflows/other_testing.yml
    
    permissions:
      actions: write
      checks: write
      contents: write
      pull-requests: write
      statuses: write
    

